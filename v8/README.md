V8
--


<!-- vim-markdown-toc GFM -->

* [V8内存限制](#v8内存限制)
* [v8 堆构成](#v8-堆构成)

<!-- vim-markdown-toc -->

## V8内存限制

内存使用超过限制会造成进程退出

64 位内存使用:

新生代: 1.4G
老生代: 64M

32 位内存使用:

新生代: 0.7G
老生代: 32M

通过node --max-old-space-size=xxx（单位MB） , node --max-new-space-size=xxx（单
位KB） 设置新生代内存以及老生代内存来破解默认的内存限制。


## v8 堆构成

V8的堆其实并不只是由老生代和新生代两部分构成，可以将堆分为几个不同的区域：

- 新生代内存区：大多数的对象被分配在这里，这个区域很小但是垃圾回特别频繁

- 老生代指针区：属于老生代，这里包含了大多数可能存在指向其他对象的指针的对象，大多数从新生代晋升的对象会被移动到这里

- 老生代数据区：属于老生代，这里只保存原始数据对象，这些对象没有指向其他对象的指针

- 大对象区：这里存放体积超越其他区大小的对象，每个对象有自己的内存，垃圾回收其不会移动大对象

- 代码区：代码对象，也就是包含JIT之后指令的对象，会被分配在这里。唯一拥有执行权限的内存区

- Cell区、属性Cell区、Map区：存放Cell、属性Cell和Map，每个区域都是存放相同大小的元素，结构简单

